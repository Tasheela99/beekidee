<div class="outer" [class.started]="isStarted">
  <!-- üîÅ Animated Background Lines (inserted here) -->
  <div class="lines">
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
    <div class="line"></div>
  </div>

  <!-- Header -->
  <div class="header justify-content-center" *ngIf="isStarted">
    <h1 *ngIf="counter < dataList.length">{{ searchItem }} ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö‡∂∏ ‡∑Ñ‡∑ú‡∂∫‡∂±‡∑ä‡∂±</h1>
    <h1 *ngIf="counter >= dataList.length">‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä! ‡∑É‡∑ô‡∂Ω‡∑ä‡∂Ω‡∂∏ ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</h1>
  </div>

  <!-- Start Button -->
  <div class="buttons justify-content-center" *ngIf="!isStarted">
    <button class="start-btn" (click)="start()">
      <span>‚ñ∂</span> ‡∑É‡∑ô‡∂Ω‡∑ä‡∂Ω‡∂∏‡∑ä ‡∂ö‡∂ª‡∂∏‡∑î.
    </button>
  </div>

  <!-- Game Content -->
  <div class="content-row" *ngIf="isStarted && counter < dataList.length">
    <div class="row">
      <div class="col-12 col-md-6">
        <div class="image-container">
          @for (index of getTreeArray(); track index) {
            <img [src]="dataList[counter].image" alt="Tree Image" class="tree-image">
          }
        </div>
      </div>
      <div class="col-12 col-md-6">
        <div class="answer-section" cdkDropListGroup>
          <div class="example-container2">
            <h2>‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂ö‡∑ú‡∂ß‡∑î‡∑Ä</h2>
            <div class="answer-card">
              <div
                cdkDropList
                #itemsList="cdkDropList"
                id="items-list"
                [cdkDropListData]="items"
                [cdkDropListConnectedTo]="[basketList]"
                class="example-list2"
                (cdkDropListDropped)="drop($event)">
                @for (item of items; track item) {
                  <div class="example-box2" cdkDrag>
                    {{ item }}
                  </div>
                }
              </div>
            </div>
          </div>
          <div class="example-container">
            <h2>‡∂î‡∂∂‡∑ö ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª</h2>
            <div class="answer-card">
              <div
                cdkDropList
                #basketList="cdkDropList"
                id="basket-list"
                [cdkDropListData]="basket"
                [cdkDropListConnectedTo]="[itemsList]"
                class="example-list"
                (cdkDropListDropped)="drop($event)">
                @for (item of basket; track item) {
                  <div class="example-box" cdkDrag>
                    {{ item }}
                  </div>
                }
                <!-- Placeholder for empty basket -->
                <div *ngIf="basket.length === 0" class="drop-placeholder">
                  ‡∂î‡∂∂‡∑ö ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂∏‡∑ô‡∂≠‡∂±‡∂ß ‡∂á‡∂Ø‡∂Ω‡∑è ‡∂Ø‡∑è‡∂±‡∑ä‡∂±.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer Buttons -->
  <div class="footer" *ngIf="isStarted">
    <div class="d-flex align-items-center justify-content-center p-4 gap-2">
      <button class="next" *ngIf="counter < dataList.length - 1" (click)="moveToNext()">
        <span>‚Üí</span> ‡∂ä‡∑Ö‡∂ü ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂ö‡∑è‡∂ª‡∂ö‡∂∏
      </button>
      <button class="reset" (click)="reStartGame()">
        <span>‚ü≥</span> ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂¥‡∂ß‡∂±‡∑ä ‡∂ú‡∂∏‡∑î.
      </button>
      <!-- NEW: Finish Game Button -->
      <button class="finish" (click)="finishGame()">
              <span>üèÅ</span> ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è‡∑Ä ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
            </button>
    </div>
  </div>
  <div class="row mt-5">
    <button mat-stroked-button class="bg-primary text-white" (click)="openSaveResultDialog()">Save Results</button>
  </div>
</div>
